<!DOCTYPE html>
<html>
<head>
	<title> Products </title>
	<style>
		.products-container {
			display: flex;
			flex-wrap: wrap;
			justify-content: space-evenly;
		}
		
		.item-div {
			flex: 0 0 25%;
			margin: 10px;
			border: 2px solid black;
  			padding: 10px;			
		}
		
		.item-div #item-name, .item-div #item-seller  {
			width: 200px;
			height: 10px;
		}
		
		.item-div #item-image{
			width: 200px;
			height: 200px;
		}
		
		.item-div #item-price  {
			width: 100px;
			height: 20px;
		}
		
		.item-div #add-to-cart  {
			width: 100px;
			height: 40px;
		}
	</style>
</head>

<body onload="onPageLoad()">
	<h3> Our Products </h3>
	
	<form>
		<div class="products-container">
		</div>
		
		<button> Proceed to Cart </button>
	</form>
	
	<script>
		function onPageLoad() {
			fetch('http://localhost:8080/allProducts')
				.then(response => response.json())
				.then(products => displayProducts(products));

			const displayProducts = products => {
				const catalogDiv = document.querySelector('.products-container');
				
				products.forEach(product => {
					console.log(product);
					const itemDiv = document.createElement('div');
					itemDiv.setAttribute("class", "item-div");
					
					const productName = document.createElement('h4');
					productName.id = "item-name";
					productName.innerText = `${product.name}`;
					itemDiv.appendChild(productName);
					
					const productSeller = document.createElement('p');
					productSeller.id = "item-seller";
					productSeller.innerHTML = `Sold by: <b>${product.seller}</b>`;
					itemDiv.appendChild(productSeller);
					
					const productImage = document.createElement('img');
					productImage.id = "item-image";
					productImage.innerHTML = `${product.image}`;
					itemDiv.appendChild(productImage);
					
					const productPrice = document.createElement('h4');
					productPrice.id = "item-price";
					productPrice.innerText = `Rs. ${product.price}`;
					itemDiv.appendChild(productPrice);
					
					const addToCartButton = document.createElement('input');
					addToCartButton.type = "Submit";
					addToCartButton.id = "add-to-card";
					addToCartButton.value = "Add to Cart";
					itemDiv.appendChild(addToCartButton);
					
					catalogDiv.appendChild(itemDiv);
				});
			}
		}	
	</script>
	
</body>

</html>
